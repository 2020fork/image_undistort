#ROS node for undistorting images and performing stereo rectification

This repo contains two related ros nodes image_undistort_node and stereo_info_node

#image_undistort_node:
A simple node for undistorting images. Handles both plumb bob (aka radial-tangental) distortion and equidistant distortion models. It can either use standard ros camera_info topics or load camera models in a form that is compatiable with the camchain.yaml files produced by [Kalibr](https://github.com/ethz-asl/kalibr).

##The node has several possible use cases:

* **Undistort images.** The default usage of the node, outputing an undistorted version of an input image.
* **Modify the image resoultion and intrinsics.** The node supports projecting from and to any valid projection matrix and resolution.
* **Provide a camera_info topic for an image.** In this mode ros params and used to build a camera info message that is published in sync with the image messages. This allows the use of ros nodes that require camera info with devices and bags that do not provide it.

##Parameters:
* **queue size** The length of the queues the node uses for topics (default: 100)
* **input_camera_info_from_ros_params** If false the node will subscribe to a camera_info ros topic to obtain the input camera parameters. If false the input camera parameters will be loaded from ros parameters. See the parameters format section for further details. (default: false)
* **output_camera_info_source** The source to use when obtaining the output camera parameters. The possible case-insensitive options are,
⋅⋅* *auto_generated* The default value. In this mode "good" output parameters are automatically generated based on the input image. focal length is the average of fx and fy of the input, the center point is in the center of the image, R=I and translation is preserved. Resolution is set to the largest area that contains no empty pixels. The size of the output can also be modified with the "scale" parameter

// source of output camera information, the options are as follows-
//  "auto_generated": (default), automatically generated based on the input, the
//    focal length is the average of fx and fy of the input, the center point is
//    in the center of the image, R=I and only x-translation is preserved.
//    Resolution is set to the largest area that contains no empty pixels. The
//    size of the output can also be modified with the "scale" parameter
//  "match_input": intrinsic values are taken from the input camera parameters
//  "ros_params": values are loaded from ros parameters, usually stored in an
//    xml file. The file format matches that generated by Kalibr.
//  "camera_info": the output parameters are found through subscribing to a
//    camera_info ros topic, (default topic is output/cam_info).
const std::string kDefaultOutputCameraInfoSource = "auto_generated";
// namespace to use when loading input camera parameters from ros params
const std::string kDefaultInputCameraNamespace = "input_camera";
// namespace to use when loading output camera parameters from ros params
const std::string kDefaultOutputCameraNamespace = "output_camera";
// true to process images, false if you only wish to generate a cam_info topic
// from ros params (the image topic must still be subscribed to so that the
// cam_info message is published at the correct times).
constexpr bool kDefaultProcessImage = true;
// true to undistort, false if you only wish to modify the intrinsics
constexpr bool kDefaultUndistortImage = true;
// downsamples output rate if <= 1, every frame is processed.
constexpr int kDefaultProcessEveryNthFrame = 1;
// converts the output image to the given format, set to the empty string "" to
// copy input type. Consult cv_bridge documentation for valid strings
const std::string kDefaultOutputImageType = "";
// if the output camera source is set to "auto_generated", the output focal
// length will be multiplied by this value. This has the effect of
// resizing the image by this scale factor.
constexpr double kDefaultScale = 1.0;
// if a tf between the input and output frame should be created
constexpr bool kDefaultPublishTF = true;
// name of output image frame
const std::string kDefaultOutputFrame = "output_camera";

